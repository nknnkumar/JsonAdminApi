<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <title>Insert</title>
    <!-- Custom styles for this template -->
    <link href="../../../../css/headers.css" rel="stylesheet">
</head>

<body class="mb-5">
    <header class="mb-3">
  <div id="NavBarId" class="px-2 py-2 bg-danger text-white">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <a href="/" class="d-flex align-items-center my-2 my-lg-0 text-white text-decoration-none">
          <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
            <use xlink:href="#bootstrap" />
          </svg>
        </a>
        <h5 class="me-lg-auto ">Alter</h5>
        <ul class="nav col-12 col-lg-auto  justify-content-center  text-small">
          <li>
            <a href="../Dashboard.html" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="20" height="20" viewBox="0 0 16 16">
                <path
                  d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z" />
                <path fill-rule="evenodd"
                  d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z" />
              </svg>
              Admin Dashboard
            </a>
          </li>
          <li>
            <a href="../Insert.html" class="nav-link text-white" onclick="">
              <svg class="bi d-block mx-auto mb-1" width="20" height="20" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                  d="M7.364 3.5a.5.5 0 0 1 .5-.5H14.5A1.5 1.5 0 0 1 16 4.5v10a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 3 14.5V7.864a.5.5 0 1 1 1 0V14.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5v-10a.5.5 0 0 0-.5-.5H7.864a.5.5 0 0 1-.5-.5z" />
                <path fill-rule="evenodd"
                  d="M0 .5A.5.5 0 0 1 .5 0h5a.5.5 0 0 1 0 1H1.707l8.147 8.146a.5.5 0 0 1-.708.708L1 1.707V5.5a.5.5 0 0 1-1 0v-5z" />
              </svg>
              Parent
            </a>
          </li>
          <li>
            <a href="Folders.html" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="20" height="20" viewBox="0 0 16 16">
                <path
                  d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z" />
                <path
                  d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z" />
              </svg>
              Folders
            </a>
          </li>
          <li>
            <a href="Files.html" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="20" height="20" viewBox="0 0 16 16">
                <path
                  d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z" />
                <path
                  d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z" />
              </svg>
              Files
            </a>
          </li>
          <li>
            <a href="Folder.html" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="20" height="20" viewBox="0 0 16 16">
                <path
                  d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z" />
                <path
                  d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z" />
              </svg>
              Folder
            </a>
          </li>
          <li>
            <a href="File.html" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="20" height="20" viewBox="0 0 16 16">
                <path
                  d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z" />
                <path
                  d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z" />
              </svg>
              File
            </a>
          </li>
          <li id="HeaderLoginButtonId">
            <a href="#" class="nav-link text-white" onclick="jVarGlobalClientObject.UI.ModalFuncs.Show()">
              <svg class="bi d-block mx-auto mb-1" width="20" height="20" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                  d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z" />
              </svg>
              Login
            </a>
          </li>
          <li id="HeaderUserIdLi" class="visually-hidden">
            <a href="#" id="HeaderUserIdDropDown" data-bs-toggle="dropdown" aria-expanded="false"
              class="nav-link text-white dropdown-toggle">
              <svg class="bi d-block mx-auto mb-1" width="20" height="20" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                <path fill-rule="evenodd"
                  d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
              </svg>
              UserName
            </a>
            <ul class="dropdown-menu" aria-labelledby="HeaderUserIdDropDown">
              <li><a class="dropdown-item" href="#" onclick="jVarGlobalClientObject.UI.ModalFuncs.Show()">
                  <svg xmlns="http://www.w3.org/2000/svg" style="font-size: 1.6rem; color:orangered" width="16"
                    height="16" fill="currentColor" class="bi bi-power" viewBox="0 0 16 16">
                    <path d="M7.5 1v7h1V1h-1z" />
                    <path
                      d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z" />
                  </svg>
                  logout</a></li>

            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
    <main>
        <div class="container">
            <!-- Breadcrumb -->
            <nav class="mb-1 mt-2" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="../../UserData/Dashboard.html">Home</a></li>
                    <li class="breadcrumb-item"><a href="../Dashboard.html">Admin</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Insert</li>
                </ol>
            </nav>
            <!-- Breadcrumb end -->
            <nav class="KeshavSoftSelectpath"></nav>

            <div class="row justify-content-center">
                <div class="col col-sm-7">
                    <div class="card text-center KSCard">
                        <div class="card-header">
                            Insert as file.json to selected Folder.
                        </div>
                        <div class="card-body">

                            <div class="container">
                                <!-- Folders -->
                                <div class="mb-3 row">
                                    <label class="col-sm-2">Folders</label>
                                    <div class="col-sm-8">
                                        <div class="col-7 input-group">
                                            <input
                                                onkeyup="jVarGlobalClientObject.DataApi.Files.PullDataRelative(event)"
                                                autocomplete="off" class="form-control FolderSelectedClass"
                                                list="FolderList" placeholder="Select Folder" />
                                            <datalist id="FolderList"> </datalist>
                                            <button type="button" class="btn btn-outline-primary"
                                                onclick="jVarGlobalClientObject.DataApi.Files.PullDataRelative(event)">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    fill="currentColor" class="bi bi-caret-right-square-fill"
                                                    viewBox="0 0 16 16">
                                                    <path
                                                        d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm5.5 10a.5.5 0 0 0 .832.374l4.5-4a.5.5 0 0 0 0-.748l-4.5-4A.5.5 0 0 0 5.5 4v8z">
                                                    </path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <!--files-->
                                <div class="mb-3 row">
                                    <label class="col col-form-label">Files</label>
                                    <div class="col-sm-8">
                                        <div class="col-7 input-group">
                                            <input
                                                onkeyup="jVarGlobalClientObject.DataApi.Items.ForDataListForUtilities(event)"
                                                autocomplete="off" class="form-control FileSelectedClass"
                                                list="FileList" placeholder="Select file" />
                                            <datalist id="FileList"> </datalist>
                                        </div>
                                    </div>
                                    <div class="col-sm-auto">
                                        <button type="button" class="btn btn-outline-success "
                                            onclick="jVarLocalInsertFileToFolder(event)">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-diamond-half" viewBox="0 0 16 16">
                                                <path
                                                    d="M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 .989c.127 0 .253.049.35.145l6.516 6.516a.495.495 0 0 1 0 .7L8.35 14.866a.493.493 0 0 1-.35.145V.989z" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer mt-auto py-3 bg-light fixed-bottom">
        <div class="container">
            <div class="bg-light d-flex justify-content-between">
                <div>KeshavSoft</div>
                <div data-BaseString="Last refresh : " id="KLastRefreshDT">Last refresh : </div>
            </div>
        </div>
    </footer>

    <!--modal popup for the ItemName duplicate-->
    <div class="modal" tabindex="-1" id="FoldersModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Insert Folder</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3 row">
                        <label class="col col-form-label">FolderName</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="FolderDuplicate" id="FolderDuplicate">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary"
                        onclick="jVarGlobalClientObject.AdminApi.Utilities.Insert.Folders.PullData()">Insert</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" tabindex="-1" id="FilesModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Insert Files</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3 row">
                        <label class="col col-form-label">FileName</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="FileDuplicate" id="FileDuplicate">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary"
                        onclick="jVarGlobalClientObject.AdminApi.Utilities.Insert.Files.PullData()">Insert</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" tabindex="-1" id="ItemsModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Insert Items</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3 row">
                        <label class="col col-form-label">ItemName</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="ItemDuplicate" id="ItemDuplicate">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary"
                        onclick="jVarGlobalClientObject.AdminApi.Utilities.Insert.Items.PullData()">Insert</button>
                </div>
            </div>
        </div>
    </div>
    <!-- login start -->
    <div class="modal fade" id="LoginModalId" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Enter client user credentials</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="LoginFormPopUpId" class="" onsubmit="return false" novalidate>
                        <div class="mb-3 form-floating is-valid">
                            <input type="text" class="form-control" id="KUserNameInput" required>
                            <label for="KUserNameInput">User Name</label>
                            <div class="invalid-feedback">
                                User Name cannot be empty.
                            </div>
                        </div>
                        <div class="mb-3 form-floating">
                            <input type="password" class="form-control" id="KPasswordInput" required>
                            <label for="KPasswordInput">Password</label>
                            <div class="invalid-feedback">
                                Password cannot be empty.
                            </div>
                        </div>
                        <input type="submit" class=" btn btn-primary"
                            onclick="jVarGlobalClientObject.Login.LoginCheck()">
                        <!-- <button type="button" class="btn btn-primary"
                      onclick="jVarGlobalAdmin.Login.LoginCheck()">Check</button>
                       -->
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="/ClassesStatic/CommonClass.js"></script>
<script src="/js/Admin/HeadFocus.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.all.min.js"></script>

    <script>
        let jVarGlobalPresentViewData;
        let jVarGlobalHBSData = {};

        jVarGlobalClientObject.Login.ClientSideCookieFuncs.CheckToken();

        jVarGlobalClientObject.DataApi.Folders.PullData();
        let jVarHtmlLoginModalId = document.getElementById("LoginModalId");
        jVarHtmlLoginModalId.addEventListener('shown.bs.modal', function (event) {
            let jVarLocalSubmitButton = event.currentTarget.querySelector(".modal-body input[type='submit']");
            jVarLocalSubmitButton.focus();

        });
        let jVarHtmlFolderModalId = document.getElementById("FoldersModal");
        jVarHtmlFolderModalId.addEventListener('shown.bs.modal', function (event) {
            let jVarLocalSubmitButton = event.currentTarget.querySelector(".modal-body input");
            jVarLocalSubmitButton.focus();
        });


        let jVarLocalInsertFileToFolder = (inEvent) => {
            let jVarLocalCurrentTarget = inEvent.currentTarget;
            let jVarLocalHtmlKSCard = jVarLocalCurrentTarget.closest(".KSCard");
            Swal.fire({
                title: 'New FileName',
                html: `<input type="text" id="FileDuplicate" class="swal2-input" placeholder="Insert FileName "> `,

                confirmButtonText: 'Insert',
                focusConfirm: false,

                preConfirm: () => {
                    const FileName = Swal.getPopup().querySelector('#FileDuplicate').value

                    return { FileName: FileName }
                }
            }).then((result) => {
                let jVarLocalFolderName = jVarLocalHtmlKSCard.querySelector(".FolderSelectedClass").value;
                let LocalFromName = jVarLocalHtmlKSCard.querySelector(".FileSelectedClass").value;
                let jVarLocalFileName = result.value.FileName;
                let jVarLocalFileArray = jVarLocalFileName.split(".");

                if (jVarLocalFileArray.length === 1) {
                    jVarLocalFileName += ".json";
                };

                let LocalToName = jVarLocalFileName;
                let jVarLocalRoute = jVarGlobalClientObject.Config.RouteStart.Start;
                let jVarLocalAdminSubRoute = jVarGlobalClientObject.Config.RouteStart.AdminSubRoute;
                let jVarLocalFetchUrl = `/${jVarLocalRoute}/${jVarLocalAdminSubRoute}/Utility/Json/File/Insert?inFolderName=${jVarLocalFolderName}&FromName=${LocalFromName}&ToName=${LocalToName}`;

                fetch(jVarLocalFetchUrl).then((response) => {
                    if (!response.ok) throw new Error(response.statusText);

                    return response.json();
                }).then((FetchData) => {
                    if (FetchData.KTF) {
                        var myModalEl = document.getElementById("FilesModal");
                        var modal = bootstrap.Modal.getInstance(myModalEl); // Ret
                        modal.hide();
                        this.ModalPopUp.StartFunc({ inType: "CreateSuccess" });
                    }
                }).catch((error) => { });
            })
        };
    </script>
</body>

</html>